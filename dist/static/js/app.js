webpackJsonp([2,0],{0:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=n(115),s=a(o),r=n(114),i=a(r),u=n(110),l=a(u),c=n(44),d=a(c),f=n(45),m=a(f),p="0.1",h=localStorage.getItem("localStorageVersion");p!==h&&(localStorage.clear(),localStorage.setItem("localStorageVersion",p));var v=new i.default({routes:[{path:"/search",component:d.default},{path:"/search-result",component:m.default},{path:"/",component:d.default}]});s.default.use(i.default),s.default.prototype.$routz=v,new s.default({el:"#app",router:v,template:"<App/>",components:{App:l.default}})},30:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){h.from.unshift(e),h.from.length=h.from.length>3?3:h.from.length,h.to.unshift(t),h.to.length=h.to.length>3?3:h.to.length}Object.defineProperty(t,"__esModule",{value:!0});var s=n(68),r=a(s),i=n(69),u=a(i),l=n(67),c=a(l),d=n(46),f=a(d),m=[],p="quickresult",h=JSON.parse(localStorage.getItem(p));h||(h={from:[],to:[]});var v=function(e){return e.SiteId||e.Name},_={fetch:function(e,t){return o(e,t),localStorage.setItem(p,(0,c.default)(h)),new u.default(function(n,a){f.default.post("api/search",{originId:v(e),destId:v(t)}).then(function(e){m=e.data,n(m.map(function(e){return(0,r.default)(e,{detailed:!1})}))})})},typeahead:function(e){return new u.default(function(t,n){f.default.post("api/typeahead",{searchstring:e}).then(function(e){t(e.data)})})},getResult:function(){return m},quickResult:function(){return h}};t.default=_},44:function(e,t,n){n(108);var a=n(24)(n(65),n(113),"data-v-7ec8f895",null);e.exports=a.exports},45:function(e,t,n){n(106);var a=n(24)(n(66),n(111),"data-v-11d5752e",null);e.exports=a.exports},64:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),s=a(o),r=n(45),i=a(r);t.default={name:"app",components:{SearchForm:s.default,SearchResult:i.default}}},65:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),s=a(o);t.default={name:"searchForm",data:function(){return{model:{from:{Name:""},fromTypeaheads:[],to:{Name:""},toTypeaheads:[]},quickResult:s.default.quickResult(),searching:!1}},computed:{modelName:function(e){return console.log(e),e}},methods:{reset:function(e){console.log("reset",e),this.model[e+"Typeaheads"].splice(0,this.model[e+"Typeaheads"].length)},selectQuick:function(e,t){this.model[e]={Name:t}},selectTypeahead:function(e,t){console.log("selectTypeahead",e,t),this.model[e]=t},search:function(){var e=this;this.searching=!0,s.default.fetch(this.model.to,this.model.from).then(function(){e.searching=!1,e.$routz.replace("/search-result")})},stationSearch:function(e){return s.default.typeahead(e)},changed:function(e){var t=this;this.model[e]={Name:this.model[e].Name},this.model[e].Name.length>2&&this.stationSearch(this.model[e].Name).then(function(n){t.model[e+"Typeaheads"]=n})}}}},66:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),s=a(o);t.default={name:"searchResult",data:function(){return{result:s.default.getResult()}},filters:{origin:function(e){return e.LegList.Leg[0].Origin.name},destination:function(e){return e.LegList.Leg[e.LegList.Leg.length-1].Destination.name},time:function(e){return e.Leg[0].Origin.time+" ⇒ "+e.Leg[e.Leg.length-1].Destination.time},typeImg:function(e){return"static/"+e+"-icon.svg"}},created:function(){0===this.result.length&&this.$routz.push("search")}}},106:function(e,t){},107:function(e,t){},108:function(e,t){},110:function(e,t,n){n(107);var a=n(24)(n(64),n(112),null,null);e.exports=a.exports},111:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",e._l(e.result,function(t){return n("li",{on:{click:function(e){t.detailed=!t.detailed}}},[n("div",{staticClass:"header"},[n("h3",[e._v("\n        "+e._s(e._f("time")(t.LegList))+" "+e._s(t.dur)+" min\n      ")]),e._v(" "),n("h5",[n("span",[e._v(e._s(e._f("origin")(t)))]),e._v(" "),n("span",[e._v("-")]),e._v(" "),n("span",[e._v(e._s(e._f("destination")(t)))])]),e._v(" "),n("button",{staticClass:"expander"},[e._v("+")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.detailed,expression:"res.detailed"}],staticClass:"legList"},[e._l(t.LegList.Leg,function(a){return"WALK"!==a.type?[n("div",{attrs:{alt:a.name}},[n("img",{attrs:{src:e._f("typeImg")(a.type),width:"50"}}),e._v(" "),n("p",{staticClass:"time"},[e._v(e._s(a.Origin.time))]),e._v(" "),n("span",{staticClass:"line"},[e._v(e._s(a.line))])]),e._v(" "),a!==t.LegList.Leg[t.LegList.Leg.length-1]?n("p",{staticClass:"middle-station"},[e._v(e._s(a.Destination.name))]):e._e()]:e._e()})],2)])}))},staticRenderFns:[]}},112:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",[n("h1",[n("router-link",{attrs:{to:"/"}},[e._v("\n        SLapp\n      ")])],1)]),e._v(" "),n("router-view")],1)},staticRenderFns:[]}},113:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{on:{submit:function(t){t.preventDefault(),e.search()}}},[n("div",{staticClass:"field-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.from.Name,expression:"model.from.Name"}],attrs:{type:"text",placeholder:"Från"},domProps:{value:e.model.from.Name},on:{input:[function(t){t.target.composing||(e.model.from.Name=t.target.value)},function(t){e.changed("from")}],keydown:function(t){return"button"in t||!e._k(t.keyCode,"esc",27)?void e.reset(t):null},blur:function(t){e.reset("from")}}}),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.model.fromTypeaheads.length,expression:"model.fromTypeaheads.length"}],staticClass:"typeahead-result"},e._l(e.model.fromTypeaheads,function(t){return n("li",{on:{mousedown:function(n){e.selectTypeahead("from",t)}}},[e._v("\n          "+e._s(t.Name)+"\n        ")])})),e._v(" "),n("div",{staticClass:"quick-wrapper"},e._l(e.quickResult.from,function(t){return n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(n){e.selectQuick("from",t)}}},[e._v(e._s(t.Name))])}))]),e._v(" "),n("div",{staticClass:"field-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.to.Name,expression:"model.to.Name"}],attrs:{type:"text",placeholder:"Till"},domProps:{value:e.model.to.Name},on:{input:[function(t){t.target.composing||(e.model.to.Name=t.target.value)},function(t){e.changed("to")}],keydown:function(t){return"button"in t||!e._k(t.keyCode,"esc",27)?void e.reset("to"):null},blur:function(t){e.reset("to")}}}),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.model.toTypeaheads.length,expression:"model.toTypeaheads.length"}],staticClass:"typeahead-result"},e._l(e.model.toTypeaheads,function(t){return n("li",{on:{mousedown:function(n){e.selectTypeahead("to",t)}}},[e._v("\n          "+e._s(t.Name)+"\n        ")])})),e._v(" "),n("div",{staticClass:"quick-wrapper"},e._l(e.quickResult.to,function(t){return n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(n){e.selectQuick("to",t)}}},[e._v(e._s(t.Name))])}))]),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.searching}},[e._v("Sök")])])])},staticRenderFns:[]}}});
//# sourceMappingURL=app.js.map