webpackJsonp([2,0],[function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var i=n(162),r=a(i),s=n(161),u=a(s),o=n(147),l=a(o),c=n(60),d=a(c),f=n(151),v=a(f),p=n(58),m=a(p),_=n(59),h=a(_),g=n(57),k=a(g),y=n(148),b=a(y),C=new u.default({routes:[{path:"/resultat",component:v.default},{path:"/storningar",component:m.default},{path:"/mina-resor",component:h.default},{path:"/om",component:k.default},{path:"/all",component:b.default},{path:"/",component:d.default}]});r.default.use(u.default),r.default.prototype.$routz=C,new r.default({el:"#app",router:C,template:"<App/>",components:{App:l.default}})},,,,,,,,,,,,,function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=t.find(function(t){return e.Name===t.Name});n?(n.count++,n.date.push(+new Date)):(e.count=1,e.date=[+new Date],t.push(e))}function r(t,e){i(x.from,t),i(x.to,e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(15),u=a(s),o=n(90),l=a(o),c=n(14),d=a(c),f=n(39),v=a(f),p=n(38),m=a(p),_=n(32),h=a(_),g="0.2",k=localStorage.getItem("localStorageVersion");g!==k&&(localStorage.clear(),localStorage.setItem("localStorageVersion",g));var y=!k,b=[],C="quickresult",x=JSON.parse(localStorage.getItem(C));x||(x={from:[{Name:"T-centralen",date:[]},{Name:"Slussen",date:[]},{Name:"Sundbyberg",date:[]}],to:[{Name:"T-centralen",date:[]},{Name:"Slussen",date:[]},{Name:"Sundbyberg",date:[]}]},localStorage.setItem(C,(0,m.default)(x)));var L=function(t,e){if("Address"===e.Type){var n;return n={},(0,v.default)(n,t+"CoordLat",e.Y/1e6),(0,v.default)(n,t+"CoordLong",e.X/1e6),(0,v.default)(n,t+"CoordName",e.Name),n}return(0,v.default)({},t+"Id",e.SiteId||e.Name)},w=void 0,N=function(){var t=(0,d.default)(u.default.mark(function t(e){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.post("api/search",e);case 2:return n=t.sent.data,t.abrupt("return",n.map(function(t){return(0,l.default)(t,{detailed:!1})}));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),S=function(t){var e=new Date((new Date).toISOString().split("T")[0]+"T"+t+"Z");return e.setMinutes(e.getMinutes()+1),e.toISOString().split("T")[1].slice(0,5)},M={fetch:function(){var t=(0,d.default)(u.default.mark(function t(e,n){var a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w={fromObj:e,toObj:n},r(e,n),localStorage.setItem(C,(0,m.default)(x)),a={},(0,l.default)(a,L("origin",e)),(0,l.default)(a,L("dest",n)),t.next=8,N(a);case 8:b=t.sent;case 9:case"end":return t.stop()}},t,void 0)}));return function(e,n){return t.apply(this,arguments)}}(),fetchLater:function(){var t=(0,d.default)(u.default.mark(function t(){var e,n,a,i,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!w||!b){t.next=12;break}return e=b[b.length-1].LegList.Leg[0].Origin,n=e.date,a=e.time,i={},(0,l.default)(i,L("origin",w.fromObj)),(0,l.default)(i,L("dest",w.toObj)),i.date=n,i.time=S(a),t.next=9,N(i);case 9:return r=t.sent,b=b.concat(r),t.abrupt("return",b);case 12:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}(),typeahead:function(){var t=(0,d.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.post("api/typeahead",{searchstring:e});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}(),getResult:function(){return b},quickResult:function(){return x},firstTime:y};e.default=M},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(140);var a=n(5)(n(80),n(158),null,null);t.exports=a.exports},function(t,e,n){n(137);var a=n(5)(n(82),n(155),"data-v-3f81e1ca",null);t.exports=a.exports},function(t,e,n){n(136);var a=n(5)(n(83),n(154),"data-v-29129469",null);t.exports=a.exports},function(t,e,n){n(141);var a=n(5)(n(85),n(159),"data-v-7ec8f895",null);t.exports=a.exports},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(38),r=a(i),s=n(15),u=a(s),o=n(14),l=a(o),c=n(32),d=a(c),f=JSON.parse(localStorage.getItem("deviation"))||[];e.default={deviations:function(){var t=(0,l.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.post("api/deviations",e);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}(),deviationGids:f,archiveDeviation:function(t){var e=t.DevCaseGid;f.push(e),localStorage.setItem("deviation",(0,r.default)(f))}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",data:function(){return{isAd:"/"===this.$route.path,leftOpen:!1,openLeft:function(){this.leftOpen=!0},closeLeft:function(){console.log(""),this.leftOpen=!1},links:[{link:"/",text:"Sökning"},{link:"/mina-resor",text:"Mina stationer"},{link:"/storningar",text:"Störningar"},{link:"/om",text:"Om SLapp"}]}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(60),r=a(i),s=n(58),u=a(s),o=n(59),l=a(o),c=n(57),d=a(c);e.default={name:"allPages",components:{searchform:r.default,deviations:u.default,mytrips:l.default,about:d.default}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var a;return function(){var i=this,r=arguments,s=function(){a=null,n||t.apply(i,r)},u=n&&!a;clearTimeout(a),a=setTimeout(s,e),u&&t.apply(i,r)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(93),s=a(r),u=n(15),o=a(u),l=n(14),c=a(l),d=n(78),f=a(d);e.default={name:"deviations",props:["list"],data:function(){return{deviations:f.default.deviations(),deviationGids:f.default.deviationGids}},methods:{onChange:i(function(){var t=(0,c.default)(o.default.mark(function t(e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.default.deviations({lineNumber:e});case 2:this.deviations=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),500),archive:function(t){f.default.archiveDeviation(t)},time:function t(e){var n=e.split("T"),a=(0,s.default)(n,2),i=a[0],t=a[1],r=i.split("-"),u=(0,s.default)(r,3),o=u[0],l=u[1],c=u[2];if(o===""+(new Date).getFullYear()){var d=["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"];i=c+" "+d[parseInt(l)-1]}return i+" "+t.slice(0,5)}}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(39),r=a(i),s=n(13),u=a(s),o=function(t){return function(e){return(0,r.default)({Name:e.Name,SiteId:e.SiteId},t,e.date)}};e.default={name:"mytrips",props:["list"],data:function(){return{quickResult:u.default.quickResult()}},computed:{stations:function(){var t=this.quickResult.from.map(o("fromDate")),e=this.quickResult.from.filter(function(t){return!!t.SiteId}).map(function(t){return t.SiteId}),n=this.quickResult.from.map(function(t){return t.Name});return this.quickResult.to.forEach(function(a){a.SiteId?e.includes(a.SiteId)?t.find(function(t){return t.SiteId===a.SiteId}).toDate=a.date:(e.push(a.SiteId),t.push(o("toDate")(a))):a.Name&&(n.includes(a.Name)?t.find(function(t){return t.Name===a.Name}).toDate=a.date:(n.push(a.Name),t.push(o("toDate")(a))))}),t}},methods:{remove:function(t){console.log(t)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"quick-result",props:["list"],computed:{filteredList:function(){var t=this,e=[];return this.list.filter(function(n){var a=t.trimName(n.Name);return!e.includes(a)&&(e.push(a),!0)}).sort(function(t,e){return t.date.length<e.date.length}).slice(0,6)}},methods:{click:function(t){this.$emit("select",t)},trimName:function(t){return t=t.charAt(0).toUpperCase()+t.slice(1),t=t.split("(")[0],t=t.trim()}}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),r=a(i),s=n(150),u=a(s);e.default={name:"searchForm",components:{"search-input":u.default},data:function(){return{quickResult:r.default.quickResult(),firstTime:r.default.firstTime,model:{from:void 0,to:void 0},searching:!1,error:""}},computed:{searchEnabled:function(){return this.model.from&&this.model.from.Name&&this.model.to&&this.model.to.Name}},methods:{search:function(){var t=this;this.model.from.Name&&this.model.to.Name&&(this.searching=!0,r.default.fetch(this.model.from,this.model.to).then(function(e){t.searching=!1,t.$routz.push("/resultat")},function(e){t.error=e,t.searching=!1}))},changeModel:function(t,e){this.model[t]=e}}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),r=a(i),s=n(149),u=a(s);e.default={name:"search-input",components:{"quick-result":u.default},props:["placeholder","quickResult"],data:function(){return{typeaheadList:[],active:void 0,searching:!1,model:{Name:""}}},watch:{model:{handler:function(t){this.$emit("modelChange",this.model)},deep:!0}},methods:{changed:function(){var t=this;this.model.Name.length>2&&(this.searching=!0,r.default.typeahead(this.model.Name).then(function(e){t.typeaheadList=e,t.active=t.typeaheadList[0],t.searching=!1},function(e){t.searching=!1,t.error=e}))},reset:function(){this.typeaheadList.splice(0,this.typeaheadList.length)},setModel:function(t){this.model=t},selectTypeahead:function(){this.setModel(this.active),this.reset()},setActive:function(t,e){if(this.active=e||this.active||this.typeaheadList[0],t){var n=this.typeaheadList.indexOf(this.active);this.active=this.typeaheadList[n+t]}},focus:function(t){t.target.scrollIntoView()}}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=a(i),s=n(14),u=a(s),o=n(13),l=a(o);e.default={name:"searchResult",data:function(){return{result:l.default.getResult(),getRealLegs:function(t){return t.LegList.Leg.filter(function(t){return"WALK"!==t.type})}}},methods:{fetchLater:function(){function t(){return e.apply(this,arguments)}var e=(0,u.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.fetchLater();case 2:this.result=t.sent;case 3:case"end":return t.stop()}},t,this)}));return t}()},filters:{origin:function(t){return t.LegList.Leg[0].Origin.name},destination:function(t){return t.LegList.Leg[t.LegList.Leg.length-1].Destination.name},time:function(t){return t.Leg[0].Origin.time+" ⇒ "+t.Leg[t.Leg.length-1].Destination.time},typeImg:function(t){return"static/"+t+"-icon.svg"}},created:function(){0===this.result.length&&this.$routz.push("/")}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,function(t,e,n){n(139);var a=n(5)(n(79),n(157),null,null);t.exports=a.exports},function(t,e,n){n(135);var a=n(5)(n(81),n(153),null,null);t.exports=a.exports},function(t,e,n){n(142);var a=n(5)(n(84),n(160),null,null);t.exports=a.exports},function(t,e,n){n(138);var a=n(5)(n(86),n(156),null,null);t.exports=a.exports},function(t,e,n){n(134);var a=n(5)(n(87),n(152),"data-v-11d5752e",null);t.exports=a.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"result"},[t._l(t.result,function(e){return n("li",{staticClass:"result-item",on:{click:function(t){e.detailed=!e.detailed}}},[n("div",{staticClass:"preview"},[n("div",{staticClass:"preview-head"},[n("h3",[t._v("\n          "+t._s(t._f("time")(e.LegList))+"\n        ")]),t._v(" "),n("h5",[n("div",{staticClass:"no-break"},[t._v(t._s(t._f("origin")(e)))]),t._v(" "),n("div",{staticClass:"no-break"},[t._v(t._s(t._f("destination")(e)))])]),t._v(" "),e.detailed?t._e():n("button",{staticClass:"expander"},[t._v("+")]),t._v(" "),e.detailed?n("button",{staticClass:"expander"},[n("span",[t._v("-")])]):t._e()]),t._v(" "),n("div",{staticClass:"preview-sub"},[n("h4",[t._v("\n          "+t._s(e.dur)+" min\n        ")]),t._v(" "),n("div",{staticClass:"preview-legs"},t._l(t.getRealLegs(e),function(e){return n("div",{staticClass:"preview-leg"},[n("img",{staticClass:"preview-leg-img",attrs:{src:t._f("typeImg")(e.type)}}),t._v(" "),n("span",{staticClass:"preview-leg-text"},[t._v(t._s(e.line))])])}))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.detailed,expression:"res.detailed"}],staticClass:"body"},[t._l(t.getRealLegs(e),function(a){return[n("div",{staticClass:"body-leg",attrs:{alt:a.name}},[n("div",{staticClass:"body-leg__first-col"},[n("div",{staticClass:"body-leg__icon"},[n("img",{staticClass:"body-leg__icon-img",attrs:{src:t._f("typeImg")(a.type)}}),t._v(" "),n("span",{staticClass:"body-leg__icon-text"},[t._v(t._s(a.line))])]),t._v(" "),n("div",[n("p",{staticClass:"time"},[t._v(t._s(a.Origin.time))]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(a.Destination.time))])])]),t._v(" "),n("table",{staticClass:"body-leg__extras"},[n("tr",[t._m(0,!0),t._v(" "),n("td",[n("h5",[t._v(t._s(a.dir))])])]),t._v(" "),a!==e.LegList.Leg[e.LegList.Leg.length-1]?n("tr",[t._m(1,!0),t._v(" "),n("td",[n("h5",[t._v(t._s(a.Destination.name))])])]):t._e()])])]})],2)])}),t._v(" "),n("li",{staticClass:"result-item"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.fetchLater()}}},[t._v("Senare")])])],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("small",[t._v("Mot:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("small",[t._v("Byt vid:")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("searchform"),t._v(" "),n("deviations"),t._v(" "),n("mytrips"),t._v(" "),n("about")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Mina stationer")]),t._v(" "),n("div",{staticClass:"result"},t._l(t.stations,function(e){return n("div",{staticClass:"result-item"},[n("div",{staticClass:"preview"},[n("div",{staticClass:"preview-head"},[n("h3",[t._v(t._s(e.Name))]),t._v(" "),n("button",{staticClass:"expander"},[n("img",{attrs:{src:"static/trash-can.svg"},on:{click:function(n){t.remove(e)}}})])]),t._v(" "),n("div",{staticClass:"preview-body"},[e.fromDate?n("p",[t._v("Åkt från: "+t._s(e.fromDate.length)+" gånger")]):t._e(),t._v(" "),e.toDate?n("p",[t._v("Åkt till: "+t._s(e.toDate.length)+" gånger")]):t._e()])])])}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"searcher"},[n("h1",[t._v("Sök störningar")]),t._v(" "),n("h3",[t._v("Fyll i den linjen du vill ha information om!")]),t._v(" "),n("input",{attrs:{type:"number"},on:{input:function(e){t.onChange(e.target.value)}}})]),t._v(" "),n("div",{staticClass:"result"},t._l(t.deviations,function(e){return t.deviationGids.includes(e.DevCaseGid)?t._e():n("div",{key:e.DevCaseGid,staticClass:"result-item"},[n("h3",[t._v(t._s(e.Header))]),t._v(" "),n("p",[t._v(t._s(t.time(e.FromDateTime))+" - "+t._s(t.time(e.UpToDateTime)))]),t._v(" "),n("p",[t._v("Gäller "+t._s(e.Scope))]),t._v(" "),n("p",[t._v(t._s(e.Details))]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:function(n){t.archive(e)}}},[t._v("Arkivera")])])}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.model.Name,expression:"model.Name"}],attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.model.Name},on:{input:[function(e){e.target.composing||t.$set(t.model,"Name",e.target.value)},function(e){t.changed()}],focus:t.focus,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key)?void t.reset():null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key)?void t.setActive(1):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key)?(e.preventDefault(),void t.selectTypeahead()):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key)?void t.setActive(-1):null}],blur:function(e){t.reset()}}}),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.typeaheadList.length||t.searching,expression:"typeaheadList.length || searching"}],staticClass:"typeahead-result"},[t.searching?n("li",[t._v("Söker")]):t._e(),t._v(" "),t._l(t.typeaheadList,function(e){return n("li",{staticClass:"typeahead-result-item",class:{"typeahead-result-item--active":e===t.active},on:{mousedown:function(n){t.selectTypeahead(e)},mouseover:function(n){t.setActive(0,e)}}},[t._v("\n      "+t._s(e.Name)+"\n    ")])})],2),t._v(" "),n("quick-result",{attrs:{list:t.quickResult},on:{select:t.setModel}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{ad:t.isAd},attrs:{id:"app"}},[n("header",[n("img",{attrs:{src:"static/hamburger.svg"},on:{click:function(e){t.openLeft()}}}),t._v(" "),n("h1",{staticClass:"main-header-heading"},[n("router-link",{attrs:{to:"/"}},[t._v("\n        SLapp\n      ")])],1),t._v(" "),n("div")]),t._v(" "),n("router-view"),t._v(" "),n("aside",{staticClass:"left",class:{"left--is-open":t.leftOpen}},[n("div",{staticClass:"left__back-drop",on:{click:function(e){t.closeLeft()}}}),t._v(" "),n("div",{staticClass:"left__body"},[t._m(0),t._v(" "),t._l(t.links,function(e){return n("div",{key:e.link,on:{click:function(e){t.closeLeft()}}},[n("router-link",{staticClass:"left__link",attrs:{to:e.link}},[t._v(t._s(e.text))])],1)})],2)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("h1",[t._v("Meny")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("\n    Hej!")]),t._v(" "),n("p",[t._v("Här tänkar jag skriva någon mysig text någon dag")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.firstTime?n("div",{staticClass:"onboarding"},[n("h3",[t._v("Välkommen till den smarta SL-appen!")]),t._v(" "),n("p",[t._v("Denna app kommer successivt lära sig hur du söker och kommer kunna föreslå resmål.")]),t._v(" "),n("p")]):t._e(),t._v(" "),n("form",{on:{submit:function(e){e.preventDefault(),t.search()}}},[n("search-input",{attrs:{placeholder:"Från",quickResult:t.quickResult.from},on:{modelChange:function(e){t.changeModel("from",e)}}}),t._v(" "),n("search-input",{attrs:{placeholder:"Till",quickResult:t.quickResult.to},on:{modelChange:function(e){t.changeModel("to",e)}}}),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.searching||!t.searchEnabled}},[t._v("Sök")]),t._v(" "),t.searching?n("p",[t._v("Söker")]):t._e(),t._v(" "),t.error?n("p",[t._v(t._s(t.error))]):t._e()],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"quick-wrapper"},t._l(t.filteredList,function(e){return n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(n){t.click(e)}}},[t._v(t._s(t.trimName(e.Name)))])}))},staticRenderFns:[]}}]);
//# sourceMappingURL=app.js.map